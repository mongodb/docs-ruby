========================
Compress Network Traffic
========================

.. meta::
   :keywords: network compression, zlib, snappy, zstd, Ruby driver, connection string, URI, settings, configure

.. contents:: On this page
   :local:
   :depth: 2

Overview
--------

The {+driver-short+} supports network compression to reduce the amount
of data transmitted between the client and the server.

The driver supports the following compression algorithms:

1. `Snappy <https://google.github.io/snappy/>`__

2. `Zlib <https://zlib.net/>`__

3. `Zstandard <https://github.com/facebook/zstd/>`__


If you specify multiple compression algorithms, the driver selects the first
one in the list supported by your MongoDB instance.

Specify Connection Algorithms
-----------------------------

To enable compression for the connection to your MongoDB instance,
specify the algorithms you want to use in one of the following ways: 

1. Add the algorithms to your connection string as a parameter 
2. Specify the algorithms in the ``compressors`` option of your ``Mongo::Client`` object

.. tabs::

   .. tab:: Connection String
      :tabid: connection-string

      To enable network compression by using the connection string, add the ``compressors`` option. 
      You can specify one or more algorithms as a comma-separated list.

      .. code-block:: ruby

         uri = "mongodb://<hostname>:<port>/?compressors=zlib,snappy"
         client = Mongo::Client.new(uri)

   .. tab:: Client Settings
      :tabid: client-settings

      To enable compression in your Client object, pass the ``:compressors`` option
      to the ``Mongo::Client`` constructor, as shown in the following example:

      .. code-block:: ruby

         client = Mongo::Client.new(["<hostname>:<port>"],
            compressors: ["zlib", "snappy"])
